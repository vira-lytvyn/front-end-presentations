<!DOCTYPE html>
<html>
<head>
  <title>D3.js essentials</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link href="../assets/css/base.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <header>
    <img class="epam-logo" src="../assets/img/logo.png"/>
    <h1>Data-Driven Documents, D3.js</h1>
  </header>

<!-- ================== Slides ================== -->
  <textarea id="source">

class: center, middle

.title[
UXD training
# D3.js essentials
]

  <svg width="96" height="91" style="position:relative;top:22px;">
    <linearGradient id="logo-gradient-1" gradientUnits="userSpaceOnUse" x1="37.2417" y1="7.0552" x2="97.9669" y2="67.7803">
      <stop offset="0" stop-color="#F9A03C"></stop>
      <stop offset="1" stop-color="#F7974E"></stop>
    </linearGradient>
    <linearGradient id="logo-gradient-2" gradientUnits="userSpaceOnUse" x1="-8.0391" y1="17.2148" x2="45.724" y2="70.978">
      <stop offset="0" stop-color="#F9A03C"></stop>
      <stop offset="1" stop-color="#F7974E"></stop>
    </linearGradient>
    <linearGradient id="logo-gradient-3" gradientUnits="userSpaceOnUse" x1="11.9321" y1="36.5513" x2="66.3901" y2="91.0092">
      <stop offset="0" stop-color="#F9A03C"></stop>
      <stop offset="1" stop-color="#F7974E"></stop>
    </linearGradient>
    <linearGradient id="logo-gradient-4" gradientUnits="userSpaceOnUse" x1="1.6533" y1="-1.6533" x2="86.899" y2="83.5924">
      <stop offset="0" stop-color="#F26D58"></stop>
      <stop offset="1" stop-color="#F9A03C"></stop>
    </linearGradient>
    <linearGradient id="logo-gradient-5" gradientUnits="userSpaceOnUse" x1="45.2446" y1="-9.5483" x2="108.0998" y2="53.3068">
      <stop offset="0" stop-color="#B84E51"></stop>
      <stop offset="1" stop-color="#F68E48"></stop>
    </linearGradient>
    <linearGradient id="logo-gradient-6" gradientUnits="userSpaceOnUse" x1="6.6323" y1="64.3193" x2="49.6788" y2="107.3658">
      <stop offset="0" stop-color="#F9A03C"></stop>
      <stop offset="1" stop-color="#F7974E"></stop>
    </linearGradient>
    <path fill="url(#logo-gradient-1)" d="M95.82,65.857c0.043-0.418,0.074-0.84,0.098-1.264c0.029-0.502-30.211-29.194-30.211-29.194h-0.723C64.984,35.399,95.635,67.73,95.82,65.857z"></path>
    <path fill="url(#logo-gradient-2)" d="M31.302,55.904c-0.04,0.088-0.08,0.176-0.121,0.264c-0.043,0.092-0.087,0.184-0.131,0.275c-0.964,2.01,13.495,16.145,14.658,14.428c0.053-0.076,0.106-0.156,0.159-0.232c0.059-0.09,0.117-0.176,0.175-0.266C46.972,68.961,31.715,54.986,31.302,55.904z"></path>
    <path fill="url(#logo-gradient-3)" d="M51.734,75.781c-0.041,0.09-0.332,0.582-0.598,0.842c-0.045,0.09,14.115,14.133,14.115,14.133h1.275C66.527,90.756,53.234,76.375,51.734,75.781z"></path>
    <path fill="url(#logo-gradient-4)" d="M95.938,64.338c-0.662,14.68-12.807,26.418-27.645,26.418h-2.006L51.469,76.158c1.219-1.719,2.352-3.5,3.361-5.357h13.463c4.258,0,7.723-3.463,7.723-7.723c0-4.258-3.465-7.723-7.723-7.723h-7.967c0.607-3.209,0.939-6.518,0.939-9.903c0-3.437-0.338-6.793-0.967-10.053h4.949l30.604,30.155C95.887,65.15,95.916,64.746,95.938,64.338z M8.05,0H0v19.955h8.05c14.06,0,25.5,11.437,25.5,25.497c0,3.825-0.853,7.456-2.369,10.716l14.686,14.471c4.822-7.215,7.641-15.877,7.641-25.187C53.508,20.39,33.115,0,8.05,0z"></path>
    <path fill="url(#logo-gradient-5)" d="M68.293,0H35.695c7.962,4.861,14.555,11.754,19.047,19.955h13.551c4.258,0,7.723,3.463,7.723,7.723c0,4.259-3.465,7.722-7.723,7.722h-3.045l30.604,30.155c0.072-0.818,0.117-1.641,0.117-2.477c0-6.727-2.414-12.898-6.422-17.701c4.008-4.801,6.422-10.973,6.422-17.699C95.969,12.417,83.555,0,68.293,0z"></path>
    <path fill="url(#logo-gradient-6)" d="M66.287,90.756H35.928C42.039,86.982,47.322,82,51.469,76.158L66.287,90.756z M45.867,70.639L31.182,56.168C27.125,64.887,18.284,70.951,8.05,70.951H0v19.953h8.05C23.804,90.904,37.709,82.846,45.867,70.639z"></path>
  </svg>
  #Data-Driven Documents


---


# Introduction

D3 allows you to bind arbitrary data to a Document Object Model (DOM), and then apply data-driven transformations to the document.    
For example, you can use D3 to generate an HTML table from an array of numbers. Or, use the same data to create an interactive SVG bar chart with smooth transitions and interaction.

D3 is not a monolithic framework that seeks to provide every conceivable feature. Instead, D3 solves the crux of the problem: efficient manipulation of documents based on data.  
This avoids proprietary representation and affords extraordinary flexibility, exposing the full capabilities of web standards such as CSS3, HTML5 and SVG.  

With minimal overhead, D3 is extremely fast, supporting large datasets and dynamic behaviors for interaction and animation. D3’s functional style allows code reuse through a diverse collection of components and plugins.


---


# Browser support

D3 supports so-called **“modern” browsers**, which generally means everything except IE8 and below. D3 is tested against 

  - Firefox, 
  - Chrome, 
  - Safari, 
  - Opera, 
  - IE9+, 
  - Android 
  - and iOS. 

Parts of D3 may work in older browsers, as the core D3 library has minimal requirements: JavaScript and the W3C DOM API. 
D3 uses the Selectors API Level 1, but you can preload Sizzle for compatibility. 
You'll need a modern browser to use **SVG** and **CSS3 Transitions**.


---


# Installing

1.  Download the latest version from official [website](http://d3js.org/) in *.zip format of from GitHub

2.  Use direct link or CDN

  ``` html
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <!-- or -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js"></script>
  ```

3.  D3 is also available via numerous package managers, including: NPM (Node.js), Bower, Browserify, Component, Jam, Composer / Packagist (PHP), SPM, JSPM, NuGet (.Net), and AMD (e.g., RequireJS).
In example:
  ``` shell
  bower install d3
  ```
  or

  ``` js
  require.config({paths: {d3: "http://d3js.org/d3.v3.min"}});

  require(["d3"], function(d3) {
      console.log(d3.version);
  });
  ```


---


# D3 components

Everything in D3 is scoped under the d3 namespace.

  - [Core](https://github.com/mbostock/d3/wiki/API-Reference#d3-core) - selections, transitions, data, localization, colors, etc.
  - [Scales](https://github.com/mbostock/d3/wiki/API-Reference#d3scale-scales) - convert between data and visual encodings
  - [SVG](https://github.com/mbostock/d3/wiki/API-Reference#d3svg-svg) - utilities for creating Scalable Vector Graphics
  - [Time](https://github.com/mbostock/d3/wiki/API-Reference#d3time-time) - parse or format times, compute calendar intervals, etc.
  - [Layouts](https://github.com/mbostock/d3/wiki/API-Reference#d3layout-layouts) - derive secondary data for positioning elements
  - [Geography](https://github.com/mbostock/d3/wiki/API-Reference#d3geo-geography) - project spherical coordinates, latitude & longitude math
  - [Geometry](https://github.com/mbostock/d3/wiki/API-Reference#d3geom-geometry) - utilities for 2D geometry, such as Voronoi diagrams and quadtrees
  - [Behaviors](https://github.com/mbostock/d3/wiki/API-Reference#d3behavior-behaviors) - reusable interaction behaviors


---


# D3 / Core / Selections

A selection is an array of elements pulled from the current document.  
D3 uses CSS3 to select elements.  
If your browser doesn't support selectors natively, you can include Sizzle before D3 for backwards-compatibility.

## Basic methods:
  - Selecting Elements (d3.select(), d3.selectAll() with "selector" || "node" arguments)
  - Operating on Selections
    - Content (selection.attr(), selection.classed(), selection.style()... selection.remove())
    - Data (selection.data(), selection.datum(), selection.filter(), selection.sort(), selection.order())
    - Animation & Interaction (selection.on(), d3.event, d3.mouse(), d3.touch(), selection.transition())
    - Subselections
    - Control (selection.each(), selection.call(), selection.empty(), selection.node(), selection.size())


---


# Selections (Examples)

For example, you can select by tag ("div"), class (".awesome"), unique identifier ("#foo"), attribute ("[color=red]"), or containment ("parent child"). 
Selectors can also be intersected (".this.that" for logical AND) or unioned (".this, .that" for logical OR). 

``` js
var paragraphs = document.getElementsByTagName("p");
for (var i = 0; i < paragraphs.length; i++) {
  var paragraph = paragraphs.item(i);
  paragraph.style.setProperty("color", "white", null);
}
```
``` js
d3.selectAll("p").style("color", "white");

d3.select("body").style("background-color", "black");
```
``` js
var td = d3.selectAll("tbody tr").selectAll("td");
td.style("color", function(d, i) { return i ? null : "red"; });

var td = d3.selectAll("tbody tr")
    .data(matrix)
  .selectAll("td")
    .data(function(d, i) { return d; }); // d is matrix[i];
```


---


# D3 / Core / Transitions

A transition is a special type of selection where the operators apply smoothly over time rather than instantaneously. 

## Basic methods:
  - Starting Transitions (d3.transition(), transition.delay(), transition.duration(), transition.ease())
  - Operating on Transitions
    - Content (transition.attr(), transition.attrTween(), transition.tween(), transition.remove())
    - Subtransitions
    - Control
    - Easing (d3.ease()(linear, poly(k), quad, cubic... bounce), ease(t))
    - Timers (d3.timer(), d3.timer.flush())
    - Interpolation (interpolate, interpolateNumber, interpolateString, interpolateRgb, interpolateArray, interpolateTransform, interpolateZoom, geo.interpolate, interpolators)


---


# Transitions (Examples)

``` js
d3.selectAll("circle").transition()
    .duration(750)
    .delay(function(d, i) { return i * 10; })
    .attr("r", function(d) { return Math.sqrt(d * scale); });
```
``` js    
selection.transition().tween("text", function() {
  var i = d3.interpolateRound(0, 100);
  return function(t) {
    this.textContent = i(t);
  };
});
```
``` js 
d3.transition()
    .duration(750)
    .ease("linear")
    .each(function() {
      d3.selectAll(".foo").transition().style("opacity", 0).remove();
    })
  .transition()
    .each(function() {
      d3.selectAll(".bar").transition().style("opacity", 0).remove();
    });
```

---


# D3 / Core / Arrays

When using D3—and doing data visualization in general—you tend to do a lot of array manipulation. That's because D3's canonical representation of data is an array. Some common forms of array manipulation include taking a contiguous slice (subset) of an array, filtering an array using a predicate function, and mapping an array to a parallel set of values using a transform function.

## Basic methods:
  - Ordering (d3.ascending(a, b), d3.max(), d3.median(), d3.deviation(), d3.bisectRight(), d3.shuffle())
  - Associative Arrays (d3.keys(), d3.values(), d3.entries())
  - Maps (map.has(key), map.get(key), map.set(key, value), map.remove(key), map.forEach(), map.empty(), map.size())
  - Sets
  - Array Operators (d3.merge(), d3.range(), d3.permute(), d3.zip(), d3.transpose(), d3.pairs())
  - Nest


---


# Arrays (Examples)

``` js
function descending(a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
}
```
``` js
var m = d3.map([{name: "foo"}, {name: "bar"}], function(d) { return d.name; });
m.get("foo"); // {"name": "foo"}
m.get("bar"); // {"name": "bar"}
m.get("baz"); // undefined
```

``` js
d3.merge([ [1], [2, 3] ]); // returns [1, 2, 3];

d3.zip([1, 2], [3, 4]); // returns [[1, 3], [2, 4]];

d3.pairs([1, 2, 3, 4]); // returns [[1, 2], [2, 3], [3, 4]];

```

---


# D3 / Core / Others parts

## Basic methods:
  - Math (d3.random.normal(), d3.random.irwinHall(), transform.rotate, transform.skew, transform.scale ...)
  - Requests (d3.xhr(), d3.text(), d3.json(), d3.xml(), d3.html(), d3.csv(), d3.tsv())
  - Formatting (d3.format(specifier), d3.formatPrefix(), d3.round(), d3.requote(),  d3.time.format()...)
  - Localization (d3.locale(), locale.numberFormat(), locale.timeFormat(), locale.timeFormat.utc())
  - Colors (RGB & HSL & HCL & L*a*b* - *.brighter(), *.darker(), *.*, *.toString()
  - Namespaces (d3.ns.prefix, d3.ns.qualify())
  - Internals (d3.functor(), d3.rebind(), d3.dispatch(), dispatch.on(), dispatch.type())


---


# Examples

``` js
d3.csv("path/to/file.csv")
  .row(function(d) { return {key: d.key, value: +d.value}; })
  .get(function(error, rows) { console.log(rows); });

d3.csv("/path/to/file.csv")
  .header("Content-Type", "application/json")
  .post(JSON.stringify({a: 2, b: 3}), function(error, data) {
    // callback
  });
```
``` js
var zero = d3.format("04d");
zero(2); // "0002"
zero(123); // "0123"

var prefix = d3.formatPrefix(1.21e9);
console.log(prefix.symbol); // "G"
console.log(prefix.scale(1.21e9)); // 1.21

d3.requote("[]"); // "\[\]"
```


---


# D3 Features

## Scales
  - [Quantitative Scales](https://github.com/mbostock/d3/wiki/Quantitative-Scales) - for continuous input domains, such as numbers.
  - [Ordinal Scales](https://github.com/mbostock/d3/wiki/Ordinal-Scales) - for discrete input domains, such as names or categories.
  - [Time Scales](https://github.com/mbostock/d3/wiki/Time-Scales) - for time domains.

##Examples

``` js
var color = d3.scale.linear()
    .domain([-1, 0, 1])
    .range(["red", "white", "green"]);
```
``` js
var o = d3.scale.ordinal()
    .domain(d3.range(50))
    .rangeRoundPoints([0, 95]);
o.range(); // [23, 24, 25, …, 70, 71, 72]
o.rangeRoundPoints([0, 100]);
o.range(); // [1, 3, 5, …, 95, 97, 98]
```

---


# D3 Features

## SVG
  - [Shapes](https://github.com/mbostock/d3/wiki/SVG-Shapes) - generate geometric shapes and primitives in SVG.
  - [Axes](https://github.com/mbostock/d3/wiki/SVG-Axes) - generate standard axes for visualizations in SVG.
  - [Controls](https://github.com/mbostock/d3/wiki/SVG-Controls) - generate standard interactive visualization controls in SVG.

##Examples

``` js
var xAxis = d3.svg.axis()
    .scale(x)
    .tickValues([1, 2, 3, 5, 8, 13, 21]);

d3.select("body").append("svg")
    .attr("class", "axis")
    .attr("width", 1440)
    .attr("height", 30)
  .append("g")
    .attr("transform", "translate(0,30)")
    .call(axis);    
```


---


# D3 Features

## Time
  - [Time Formatting](https://github.com/mbostock/d3/wiki/Time-Formatting) - convert between times and strings.
  - [Time Scales](https://github.com/mbostock/d3/wiki/Time-Scales) - compute visual encodings of times.
  - [Time Intervals](https://github.com/mbostock/d3/wiki/Time-Intervals) - perform simple time arithmetic.

##Examples

``` js
var format = d3.time.format("%Y-%m-%d");
format.parse("2011-01-01"); // returns a Date
format(new Date(2011, 0, 1)); // returns a string

var iso = d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");

d3.time.day.ceil(new Date()) // midnight (12:00 AM)
```


---


# D3 Features

## Layouts
  - [Bundle](https://github.com/mbostock/d3/wiki/Bundle-Layout) - apply Holten's hierarchical bundling algorithm to edges.
  - [Chord](https://github.com/mbostock/d3/wiki/Chord-Layout) - produce a chord diagram from a matrix of relationships.
  - [Cluster](https://github.com/mbostock/d3/wiki/Cluster-Layout) - cluster entities into a dendrogram.
  - [Force](https://github.com/mbostock/d3/wiki/Force-Layout) - position linked nodes using physical simulation.
  - [Hierarchy](https://github.com/mbostock/d3/wiki/Hierarchy-Layout) - derive a **custom** hierarchical layout implementation.
  - [Histogram](https://github.com/mbostock/d3/wiki/Histogram-Layout) - compute the distribution of data using quantized bins.
  - [Pack](https://github.com/mbostock/d3/wiki/Pack-Layout) - produce a hierarchical layout using recursive circle-packing.
  - [Partition](https://github.com/mbostock/d3/wiki/Partition-Layout) - recursively partition a node tree into a sunburst or icicle.
  - [Pie](https://github.com/mbostock/d3/wiki/Pie-Layout) - compute the start and end angles for arcs in a pie or donut chart.
  - [Stack](https://github.com/mbostock/d3/wiki/Stack-Layout) - compute the baseline for each series in a stacked bar or area chart.
  - [Tree](https://github.com/mbostock/d3/wiki/Tree-Layout) - position a tree of nodes tidily.
  - [Treemap](https://github.com/mbostock/d3/wiki/Treemap-Layout) - use recursive spatial subdivision to display a tree of nodes.


---


# D3 Features

## Geo
  - [Paths](https://github.com/mbostock/d3/wiki/Geo-Paths) - display geographic shapes.
  - [Projections](https://github.com/mbostock/d3/wiki/Geo-Projections) - convert locations (latitude and longitude) to pixel coordinates.
  - [Streams](https://github.com/mbostock/d3/wiki/Geo-Streams) - streaming geometry transformations.

##Examples

``` js
svg.selectAll("path")
    .data(features)
  .enter().append("path")
    .attr("d", d3.geo.path());
```
``` js
function matrix(a, b, c, d, tx, ty) {
  return d3.geo.transform({
    point: function(x, y) { this.stream.point(a * x + b * y + tx, c * x + d * y + ty); },
  });
}
var path = d3.geo.path()
    .projection(matrix(1, 0, 0, -1, 0, height));
```


---


# D3 Features

## Geometry
  - [Voronoi](https://github.com/mbostock/d3/wiki/Voronoi-Geom) - compute the Voronoi tesselation or Delaunay triangulation from a set of points.
  - [Quadtree](https://github.com/mbostock/d3/wiki/Quadtree-Geom) - compute a quadtree from a set of points.
  - [Hull](https://github.com/mbostock/d3/wiki/Hull-Geom) - compute the convex hull of a set of points.
  - [Polygon](https://github.com/mbostock/d3/wiki/Polygon-Geom) - perform polygon operations, such as computing area and clipping.

##Examples

``` js
var hull = svg.append("path")
    .attr("class", "hull");

hull.datum(d3.geom.hull(vertices)).attr("d", function(d) { 
  return "M" + d.join("L") + "Z"; 
});
```


---


# D3 Features

## Behaviors
  - [Drag](https://github.com/mbostock/d3/wiki/Drag-Behavior) -  automatically creates event listeners to handle drag gestures on an element. Both mouse events and touch events are supported.
  - [Zoom](https://github.com/mbostock/d3/wiki/Zoom-Behavior) - automatically creates event listeners to handle zooming and panning gestures on a container element. Both mouse and touch events are supported.

##Examples
``` js
selection.on("click", function() { // click suppressed;
  if (d3.event.defaultPrevented) return; // may console.log("clicked!");
});
drag.on("dragstart", function() {
  d3.event.sourceEvent.stopPropagation(); // silence other listeners });
```
``` js
var zoom = d3.behavior.zoom().scale(projection.scale() * 2 * Math.PI)
    .scaleExtent([1 << 11, 1 << 14])
    .translate([width - center[0], height - center[1]])
    .on("zoom", zoomed);
function zoomed() { // function body =) }
```


---


# Useful links

- [API](https://github.com/mbostock/d3/wiki/API-Reference)
- [D3-Tips-and-Tricks](https://leanpub.com/D3-Tips-and-Tricks/read)
- [Gallery](https://github.com/mbostock/d3/wiki/Gallery)

---


class: center, middle 

.title[
UXD training
# Thank you for attention


# Questions?)
]


  </textarea>
<!-- ================== End of Slides ================== -->

  <script src="../assets/js/remark-latest.min.js" type="text/javascript"></script>
  <script type="text/javascript">remark.create({highlightStyle: 'github'});</script>
</body>
</html>