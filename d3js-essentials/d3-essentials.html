<!DOCTYPE html>
<html>
<head>
  <title>D3.js essentials</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <link href="../assets/css/base.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <header>
    <img class="epam-logo" src="../assets/img/logo.png"/>
    <h1>Data-Driven Documents, D3.js</h1>
  </header>

<!-- ================== Slides ================== -->
  <textarea id="source">

class: center, middle

.title[
UXD training
# D3.js essentials
]

D3.js is a JavaScript library for manipulating documents based on data, it helps you bring data to life using HTML, SVG and CSS.  

D3’s emphasis on web standards gives you the full capabilities of modern browsers without tying yourself to a proprietary framework, combining powerful visualization components and a data-driven approach to DOM manipulation.


---


# Browser support

D3 supports so-called **“modern” browsers**, which generally means everything except IE8 and below. D3 is tested against 

  - Firefox, 
  - Chrome, 
  - Safari, 
  - Opera, 
  - IE9+, 
  - Android 
  - and iOS. 

Parts of D3 may work in older browsers, as the core D3 library has minimal requirements: JavaScript and the W3C DOM API. 
D3 uses the Selectors API Level 1, but you can preload Sizzle for compatibility. 
You'll need a modern browser to use **SVG** and **CSS3 Transitions**.


---


# Installing

1.  Download the latest version from official [website](http://d3js.org/) in *.zip format of from GitHub

2.  Use direct link or CDN

  ``` html
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <!-- or -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js"></script>
  ```

3.  D3 is also available via numerous package managers, including: NPM (Node.js), Bower, Browserify, Component, Jam, Composer / Packagist (PHP), SPM, JSPM, NuGet (.Net), and AMD (e.g., RequireJS).
In example:
  ``` shell
  bower install d3
  ```
  or

  ``` js
  require.config({paths: {d3: "http://d3js.org/d3.v3.min"}});

  require(["d3"], function(d3) {
      console.log(d3.version);
  });
  ```


---


# Introduction

D3 allows you to bind arbitrary data to a Document Object Model (DOM), and then apply data-driven transformations to the document.  
For example, you can use D3 to generate an HTML table from an array of numbers. Or, use the same data to create an interactive SVG bar chart with smooth transitions and interaction.

D3 is not a monolithic framework that seeks to provide every conceivable feature. Instead, D3 solves the crux of the problem: efficient manipulation of documents based on data.  
This avoids proprietary representation and affords extraordinary flexibility, exposing the full capabilities of web standards such as CSS3, HTML5 and SVG.  
With minimal overhead, D3 is extremely fast, supporting large datasets and dynamic behaviors for interaction and animation. D3’s functional style allows code reuse through a diverse collection of components and plugins.


---


# D3 components

Everything in D3 is scoped under the d3 namespace.

  - Core - selections, transitions, data, localization, colors, etc.
  - Scales - convert between data and visual encodings
  - SVG - utilities for creating Scalable Vector Graphics
  - Time - parse or format times, compute calendar intervals, etc.
  - Layouts - derive secondary data for positioning elements
  - Geography - project spherical coordinates, latitude & longitude math
  - Geometry - utilities for 2D geometry, such as Voronoi diagrams and quadtrees
  - Behaviors - reusable interaction behaviors


---


# D3 / Core / Selections

A selection is an array of elements pulled from the current document.  
D3 uses CSS3 to select elements. For example, you can select by tag ("div"), class (".awesome"), unique identifier ("#foo"), attribute ("[color=red]"), or containment ("parent child"). 
Selectors can also be intersected (".this.that" for logical AND) or unioned (".this, .that" for logical OR). 
If your browser doesn't support selectors natively, you can include Sizzle before D3 for backwards-compatibility.

## Basic methods:
  - Selecting Elements (d3.select(), d3.selectAll() with "selector" || "node" arguments)
  - Operating on Selections
    - Content (selection.attr(), selection.classed(), selection.style()... selection.remove())
    - Data (selection.data(), selection.datum(), selection.filter(), selection.sort(), selection.order())
    - Animation & Interaction (selection.on(), d3.event, d3.mouse(), d3.touch(), selection.transition())
    - Subselections
    - Control (selection.each(), selection.call(), selection.empty(), selection.node(), selection.size())


---


# D3 / Core / Transitions

A transition is a special type of selection where the operators apply smoothly over time rather than instantaneously. You derive a transition from a selection using the transition operator. 
While transitions generally support the same operators as selections (such as attr and style), not all operators are supported; for example, you must append elements before a transition starts. 
A remove operator is provided for convenient removal of elements when the transition ends.

## Basic methods:
  - Starting Transitions (d3.transition(), transition.delay(), transition.duration(), transition.ease())
  - Operating on Transitions
    - Content (transition.attr(), transition.attrTween(), transition.tween(), transition.remove())
    - Subtransitions
    - Control
    - Easing (d3.ease()(linear, poly(k), quad, cubic... bounce), ease(t))
    - Timers (d3.timer(), d3.timer.flush())
    - Interpolation (d3.interpolate(a, b), interpolate(t), d3.interpolateNumber(a, b), d3.interpolateString(a, b), d3.interpolateRgb(a, b), d3.interpolateArray(a, b), d3.interpolateTransform(a, b), d3.interpolateZoom(a, b), d3.geo.interpolate(a, b), d3.interpolators)


---


# D3 / Core / Arrays

When using D3—and doing data visualization in general—you tend to do a lot of array manipulation. That's because D3's canonical representation of data is an array. Some common forms of array manipulation include taking a contiguous slice (subset) of an array, filtering an array using a predicate function, and mapping an array to a parallel set of values using a transform function.

## Basic methods:
  - Ordering (d3.ascending(a, b), d3.max(), d3.median(), d3.deviation(), d3.bisectRight(), d3.shuffle())
  - Associative Arrays (d3.keys(), d3.values(), d3.entries())
  - Maps (map.has(key), map.get(key), map.set(key, value), map.remove(key), map.forEach(), map.empty(), map.size())
  - Sets
  - Array Operators (d3.merge(), d3.range(), d3.permute(), d3.zip(), d3.transpose(), d3.pairs())
  - Nest


---


# D3 / Core / Others

## Basic methods:
  - Math (d3.random.normal(), d3.random.irwinHall(), transform.rotate, transform.skew, transform.scale ...)
  - Requests (d3.xhr(), d3.text(), d3.json(), d3.xml(), d3.html(), d3.csv(), d3.tsv())
  - Formatting (d3.format(specifier), d3.formatPrefix(), d3.round(), d3.requote(),  d3.time.format()...)
  - Localization (d3.locale(), locale.numberFormat(), locale.timeFormat(), locale.timeFormat.utc())
  - Colors (RGB & HSL & HCL & L*a*b* - *.brighter(), *.darker(), *.*, *.toString()
  - Namespaces (d3.ns.prefix, d3.ns.qualify())
  - Internals (d3.functor(), d3.rebind(), d3.dispatch(), dispatch.on(), dispatch.type())


---


# D3 Features

## Scales
  - [Quantitative Scales](https://github.com/mbostock/d3/wiki/Quantitative-Scales) - for continuous input domains, such as numbers.
  - [Ordinal Scales](https://github.com/mbostock/d3/wiki/Ordinal-Scales) - for discrete input domains, such as names or categories.
  - [Time Scales](https://github.com/mbostock/d3/wiki/Time-Scales) - for time domains.

**Examples**

``` js
/////////////////////////////////
```


---


# D3 Features

## SVG
  - [Shapes](https://github.com/mbostock/d3/wiki/SVG-Shapes) - generate geometric shapes and primitives in SVG.
  - [Axes](https://github.com/mbostock/d3/wiki/SVG-Axes) - generate standard axes for visualizations in SVG.
  - [Controls](https://github.com/mbostock/d3/wiki/SVG-Controls) - generate standard interactive visualization controls in SVG.

**Examples**

``` js
/////////////////////////////////
```


---


# D3 Features

## Time
  - [Time Formatting](https://github.com/mbostock/d3/wiki/Time-Formatting) - convert between times and strings.
  - [Time Scales](https://github.com/mbostock/d3/wiki/Time-Scales) - compute visual encodings of times.
  - [Time Intervals](https://github.com/mbostock/d3/wiki/Time-Intervals) - perform simple time arithmetic.

**Examples**

``` js
/////////////////////////////////
```


---


# D3 Features

## Layouts
  - [Bundle](https://github.com/mbostock/d3/wiki/Bundle-Layout) - apply Holten's hierarchical bundling algorithm to edges.
  - [Chord](https://github.com/mbostock/d3/wiki/Chord-Layout) - produce a chord diagram from a matrix of relationships.
  - [Cluster](https://github.com/mbostock/d3/wiki/Cluster-Layout) - cluster entities into a dendrogram.
  - [Force](https://github.com/mbostock/d3/wiki/Force-Layout) - position linked nodes using physical simulation.
  - [Hierarchy](https://github.com/mbostock/d3/wiki/Hierarchy-Layout) - derive a **custom** hierarchical layout implementation.
  - [Histogram](https://github.com/mbostock/d3/wiki/Histogram-Layout) - compute the distribution of data using quantized bins.
  - [Pack](https://github.com/mbostock/d3/wiki/Pack-Layout) - produce a hierarchical layout using recursive circle-packing.
  - [Partition](https://github.com/mbostock/d3/wiki/Partition-Layout) - recursively partition a node tree into a sunburst or icicle.
  - [Pie](https://github.com/mbostock/d3/wiki/Pie-Layout) - compute the start and end angles for arcs in a pie or donut chart.
  - [Stack](https://github.com/mbostock/d3/wiki/Stack-Layout) - compute the baseline for each series in a stacked bar or area chart.
  - [Tree](https://github.com/mbostock/d3/wiki/Tree-Layout) - position a tree of nodes tidily.
  - [Treemap](https://github.com/mbostock/d3/wiki/Treemap-Layout) - use recursive spatial subdivision to display a tree of nodes.


---


# D3 Features

## Geo
  - [Paths](https://github.com/mbostock/d3/wiki/Geo-Paths) - display geographic shapes.
  - [Projections](https://github.com/mbostock/d3/wiki/Geo-Projections) - convert locations (latitude and longitude) to pixel coordinates.
  - [Streams](https://github.com/mbostock/d3/wiki/Geo-Streams) - streaming geometry transformations.

**Examples**

``` js
/////////////////////////////////
```


---


# D3 Features

## Geometry
  - [Voronoi](https://github.com/mbostock/d3/wiki/Voronoi-Geom) - compute the Voronoi tesselation or Delaunay triangulation from a set of points.
  - [Quadtree](https://github.com/mbostock/d3/wiki/Quadtree-Geom) - compute a quadtree from a set of points.
  - [Hull](https://github.com/mbostock/d3/wiki/Hull-Geom) - compute the convex hull of a set of points.
  - [Polygon](https://github.com/mbostock/d3/wiki/Polygon-Geom) - perform polygon operations, such as computing area and clipping.

**Examples**

``` js
/////////////////////////////////
```


---


# D3 Features

## Behaviors
  - [Drag](https://github.com/mbostock/d3/wiki/Drag-Behavior) -  automatically creates event listeners to handle drag gestures on an element. Both mouse events and touch events are supported.
  - [Zoom](https://github.com/mbostock/d3/wiki/Zoom-Behavior) - automatically creates event listeners to handle zooming and panning gestures on a container element. Both mouse and touch events are supported.

**Examples**

``` js
/////////////////////////////////
```


---


#Enter and Exit

Read more about data joins.
Using D3’s enter and exit selections, you can create new nodes for incoming data and remove outgoing nodes that are no longer needed.

When data is bound to a selection, each element in the data array is paired with the corresponding node in the selection. If there are fewer nodes than data, the extra data elements form the enter selection, which you can instantiate by appending to the enter selection. For example:
``` js
d3.select("body").selectAll("p")
    .data([4, 8, 15, 16, 23, 42])
  .enter().append("p")
    .text(function(d) { return "I’m number " + d + "!"; });
```
Updating nodes are the default selection—the result of the data operator. Thus, if you forget about the enter and exit selections, you will automatically select only the elements for which there exists corresponding data. A common pattern is to break the initial selection into three parts: the updating nodes to modify, the entering nodes to add, and the exiting nodes to remove.
``` js
// Update…
var p = d3.select("body").selectAll("p")
    .data([4, 8, 15, 16, 23, 42])
    .text(String);

// Enter…
p.enter().append("p")
    .text(String);

// Exit…
p.exit().remove();
```
By handling these three cases separately, you specify precisely which operations run on which nodes. This improves performance and offers greater control over transitions. For example, with a bar chart you might initialize entering bars using the old scale, and then transition entering bars to the new scale along with the updating and exiting bars.

D3 lets you transform documents based on data; this includes both creating and destroying elements. D3 allows you to change an existing document in response to user interaction, animation over time, or even asynchronous notification from a third-party. A hybrid approach is even possible, where the document is initially rendered on the server, and updated on the client via D3.


---


#Transitions

D3’s focus on transformation extends naturally to animated transitions. Transitions gradually interpolate styles and attributes over time. Tweening can be controlled via easing functions such as “elastic”, “cubic-in-out” and “linear”. D3’s interpolators support both primitives, such as numbers and numbers embedded within strings (font sizes, path data, etc.), and compound values. You can even extend D3’s interpolator registry to support complex properties and data structures.

For example, to fade the background of the page to black:
``` js
d3.select("body").transition()
    .style("background-color", "black");
```
Or, to resize circles in a symbol map with a staggered delay:
``` js
d3.selectAll("circle").transition()
    .duration(750)
    .delay(function(d, i) { return i * 10; })
    .attr("r", function(d) { return Math.sqrt(d * scale); });
```
By modifying only the attributes that actually change, D3 reduces overhead and allows greater graphical complexity at high frame rates. D3 also allows sequencing of complex transitions via events. And, you can still use CSS3 transitions; D3 does not replace the browser’s toolbox, but exposes it in a way that is easier to use.


---


# D3 is a library
 - method chaining
 - style guige |
 - purpose of using, goals
 - sources & documentations

## Features
- axis
- svg vs canvas

## components
- path
- shapes
- styling svg 
- children based object for working with arrays and methods for converting for such structure


---


## working with data
- arrays, objects
- json
- csv, tsv

## Examples of using


---

class: center, middle 

.title[
UXD training
# Thank you for attention


# Questions?)
]


  </textarea>
<!-- ================== End of Slides ================== -->

  <script src="../assets/js/remark-latest.min.js" type="text/javascript"></script>
  <script type="text/javascript">remark.create({highlightStyle: 'github'});</script>
</body>
</html>